# 20191029

```go:main_7.go
package main

import "fmt"

func main() {
	in := make(chan int)
	go Generate(in)
	for i := 0; i < 10; i++ {
		fmt.Printf("i: %v\n", i)
		prime := <-in
		out := make(chan int)
		fmt.Printf("i: %v prime %v out %v\n", i, prime, out)
		go Filter(i, in, out, prime)
		in = out
	}
}

func Generate(in chan<- int) {
	for i := 2; ; i++ {
		in <- i
	}
}

func Filter(no int, in <-chan int, out chan<- int, prime int) {
	n := 0
	for {
		n++
		i := <-in
		if i % prime != 0 {
			out <- i
			fmt.Printf("i: %v prime %v in %v out %v in %v %v\n", no, prime, in, out, i, n)
		}
	}
}
```

- https://postd.cc/go_concurrency_visualize/
